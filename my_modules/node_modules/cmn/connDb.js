/**************************************************************************************************
 * モジュール名　: データベース関連共通
 * 概要　　　　　: データベースで共通の処理を定義する
 *************************************************************************************************/

var Q = require('q');

/*
 * データベースオープン
 * 概　要 : データベースをオープンしてコネクションを取得する
 * 引　数 : in_db データベースオブジェクト
 * 戻り値 : promise（resolve：コネクション）
 */
function openDb(in_db){

  var _d = Q.defer();

  in_db.open(function(in_err, in_conn){
    if(in_err){
      _d.reject(in_err);
    }
    _d.resolve(in_conn);
  });
  return _d.promise;
}

// エクスポート
exports.openDb = openDb;